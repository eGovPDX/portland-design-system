{#
/**
 * @file
 * Template for Portland Button component.
 *
 * Available variables:
 * - variant: Button visual style (default, secondary, accent-cool, accent-warm, base, outline, outline-inverse)
 * - size: Button size (default, big)
 * - type: Button type attribute (button, submit, reset)
 * - disabled: Boolean indicating if button is disabled
 * - aria_disabled: Boolean indicating if button is aria-disabled
 * - unstyled: Boolean indicating if button should be unstyled
 * - label: Button text label
 * - url: Optional URL to render button as link
 * - attributes: Additional HTML attributes
 * - content: Button content (slot)
 * - start_icon: Icon/content before button text (slot)
 * - end_icon: Icon/content after button text (slot)
 */
#}

{# Set default values #}
{% set button_variant = variant|default('default') %}
{% set button_size = size|default('default') %}
{% set button_type = type|default('button') %}
{% set is_disabled = disabled|default(false) %}
{% set is_aria_disabled = aria_disabled|default(false) %}
{% set is_unstyled = unstyled|default(false) %}
{% set button_label = label|default('') %}
{% set button_url = url|default('') %}

{# Build attributes #}
{% set button_attributes = attributes|default({}) %}
{% if button_attributes.class is defined %}
  {% set additional_classes = button_attributes.class %}
{% else %}
  {% set additional_classes = '' %}
{% endif %}

{# Determine if this should be a link or button #}
{% if button_url is not empty and not is_disabled %}
  {# Render as link #}
  <a href="{{ button_url }}"
     class="portland-button-link {{ additional_classes }}"
     {% if is_aria_disabled %}aria-disabled="true"{% endif %}
     {% if button_attributes %}
       {% for attr_name, attr_value in button_attributes %}
         {% if attr_name != 'class' %}{{ attr_name }}="{{ attr_value }}"{% endif %}
       {% endfor %}
     {% endif %}>
    <portland-button
      variant="{{ button_variant }}"
      size="{{ button_size }}"
      {% if is_unstyled %}unstyled{% endif %}
      {% if button_label is not empty %}label="{{ button_label }}"{% endif %}
      {% if is_disabled %}disabled{% endif %}
      {% if is_aria_disabled %}aria-disabled="true"{% endif %}>
      
      {# Start icon slot #}
      {% if start_icon is defined and start_icon is not empty %}
        <span slot="startIcon">{{ start_icon }}</span>
      {% endif %}
      
      {# Main content #}
      {% if content is defined and content is not empty %}
        {{ content }}
      {% elseif button_label is not empty %}
        {{ button_label }}
      {% else %}
        Button
      {% endif %}
      
      {# End icon slot #}
      {% if end_icon is defined and end_icon is not empty %}
        <span slot="endIcon">{{ end_icon }}</span>
      {% endif %}
    </portland-button>
  </a>
{% else %}
  {# Render as button #}
  <portland-button
    variant="{{ button_variant }}"
    size="{{ button_size }}"
    type="{{ button_type }}"
    class="{{ additional_classes }}"
    {% if is_unstyled %}unstyled{% endif %}
    {% if button_label is not empty %}label="{{ button_label }}"{% endif %}
    {% if is_disabled %}disabled{% endif %}
    {% if is_aria_disabled %}aria-disabled="true"{% endif %}
    {% if button_attributes %}
      {% for attr_name, attr_value in button_attributes %}
        {% if attr_name != 'class' %}{{ attr_name }}="{{ attr_value }}"{% endif %}
      {% endfor %}
    {% endif %}>
    
    {# Start icon slot #}
    {% if start_icon is defined and start_icon is not empty %}
      <span slot="startIcon">{{ start_icon }}</span>
    {% endif %}
    
    {# Main content #}
    {% if content is defined and content is not empty %}
      {{ content }}
    {% elseif button_label is not empty %}
      {{ button_label }}
    {% else %}
      Button
    {% endif %}
    
    {# End icon slot #}
    {% if end_icon is defined and end_icon is not empty %}
      <span slot="endIcon">{{ end_icon }}</span>
    {% endif %}
  </portland-button>
{% endif %}